{{ $IPFS_gateway := .IPFS_gateway }}
{{ $ceremony_CID := .ceremony_CID }}
{{ $ceremony := getJSON $IPFS_gateway $ceremony_CID "/ceremony.json" }}
{{ with $ceremony }}

<div class="ceremony">
  <div class="ceremony_organizer">Organizer's identifier = <span id="organizer_identifier">{{ .organizer_identifier }}</div>
  <div class="ceremony_datetime"><h4 id="{{ .datetime }}@{{ float .latitude }},{{ float .longitude }}">Local date and time = <span id="datetime">{{ .datetime }}</span></h4></div>
  <div class="ceremony_location">Latitude, longitude = <a href="#popup_{{ .datetime }}@{{ float .latitude }},{{ float .longitude }}"><span id="latitude">{{ float .latitude }}</span>, <span id="longitude">{{ float .longitude }}</span></a></div>
  <div class="ceremony_block">Ethereum block height and hash = <span id="block_height">{{ .block_height }}</span>, <span id="block_hash">{{ .block_hash }}</span></div>
  <div class="ceremony_IPFS"><a id="IPFS_link" href="https://ipns.co/{{ $ceremony_CID }}">Full IPFS directory</a></div>

  <div class="ceremony_gallery">Videos and pictures<br />
    <div class="visible-media">
    {{ range .videos }}
      <video height="240" class="lightboxable-media" id="ceremony_video" style="max-height:240px; height:auto; width:auto; vertical-align:top;" src="{{ $IPFS_gateway }}{{ $ceremony_CID }}/{{ . }}" controls>
	    Your browser does not support the video tag but <a href="{{ $IPFS_gateway }}{{$ceremony_CID }}/{{ . }}">you can download this video.</a>
	  </video>
    {{ end }}
    {{ range .pictures }}
      <img height="240" class="lightboxable-media" id="ceremony_picture" src="{{ $IPFS_gateway }}{{ $ceremony_CID }}/{{ . }}"  style="display:inline; max-height:240px; height:auto; width:auto; vertical-align:top;" />
	{{ end }}
	</div>
	<div class="hidden-media">
    {{ range .videos }}
      <video class="ceremony_video" hidden controls><source src="https://ipns.co/{{ $ceremony_CID }}/{{ . }}"></video>
	{{ end }}
	{{ range.pictures }}
      <img class="ceremony_picture" hidden loading="lazy" src="https://ipns.co/{{ $ceremony_CID }}/{{ . }}" />
	{{end}}
	</div>
    <div class="lightbox">
	  <span class="lightbox-close">&#x2715;</span> <!-- This is for × -->
	  <span class="lightbox-previous">&#x00AB;</span> <!-- This is for « -->
	  <span class="lightbox-next">&#x00BB;</span> <!-- This is for » -->
	  <img class="lightbox-image lightbox-media" src="" />
	  <video class="lightbox-video lightbox-media" src="" controls>
	    Your browser does not support the video tag.</a>
	  </video>
	</div>
  <!-- the lightbox CSS and JS are in the head of the site -->
  </div>
</div>
{{ end }}

{{ if not (isset . "organizer_identifier") }}
  <script defer src="/js/ceremony_load.js"></script>
{{ end }}
